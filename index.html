<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Rouge+Script&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="myNorm.css">
    <link rel="stylesheet" href="style.css">
    <title>Vegan honey</title>
    <script src="https://kit.fontawesome.com/4606651876.js" crossorigin="anonymous"></script>
</head>

<body>
    <header>
        <figure class="logo">
            <img src="assets/logo.png" alt="logoImg">
            <figcaption>Vegan Honey</figcaption>
        </figure>

        <nav id="headerNavBar">
            <span onmouseover="showNavImg(this)" onmouseout="hideNavImg(this)">
                <img class="navImg" src="assets/logo.png">
                <a href="#article">Our VHoney</a>
            </span>
            <span onmouseover="showNavImg(this)" onmouseout="hideNavImg(this)">
                <img class="navImg" src="assets/logo.png">
                <a href="#traceHoney">Trace Honey</a>
            </span>
            <span onmouseover="showNavImg(this)" onmouseout="hideNavImg(this)">
                <img class="navImg" src="assets/logo.png">
                <a href="#card">Shop</a>
            </span>
            <span onmouseover="showNavImg(this)" onmouseout="hideNavImg(this)">
                <img class="navImg" src="assets/logo.png">
                <a href="#">Facilities</a></span>
            <span onmouseover="showNavImg(this)" onmouseout="hideNavImg(this)">
                <img class="navImg" src="assets/logo.png">
                <a href="#">Contacts</a>
            </span>
        </nav>

        <div id="icons">
            <a href="#" title="home"><i class="fa-solid fa-igloo"></i></a>
            <a href="#" title="checkout"><i class="fa-solid fa-basket-shopping" onclick="assegnaClasse('shoppingCart')"></i></a>
        </div>

        <div class="iconMobile">
            <i class="fa-solid fa-basket-shopping" onclick="assegnaClasse('shoppingCart')"></i>
            <i class="fa-solid fa-bars" onclick="assegnaClasse('side')"></i>
        </div>
    </header>

    <main>
        <section id="article">
            <figure>
                <div class="sectionImgDiv" style="width: 50%;">
                    <img src="assets/honey.jpg" alt="honey" style="width: 90%;">
                </div>
                <figcaption class="sectionTxtDiv" style="width: 50%;">
                    <h2>Our delicious VHoney üçé</h2>
                    <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quam suscipit vel asperiores aperiam
                        laborum laudantium quod, voluptate possimus magni reprehenderit, quae sint tempore fugit. Dolore
                        corporis suscipit temporibus rerum vero.
                    </p>
                </figcaption>
            </figure>

            <div id="card">
                <div class="cardContent">
                    <div class="divImmagine">

                    </div>
                    <!-- <img src="./assets/honey.jpg" alt="honey"> -->

                    <div class="cardTxt">
                        <div class="cardInfo">
                            <h2>100% Bio Cruelty-free honey</h2>
                            <p>Italian, not treated, from apple cider</p>
                        </div>
                        <div class="cardPrice">7‚Ç¨/kg</div>
                        <button id="addToCart" onclick="addToCart()">üçØ Add to cart üçØ</button>
                    </div>
                </div>
            </div>

        </section>

    </main>

    <!-- sidebar con menu -->
    <div id="side" class="side">
        <figure class="logo">
            <img src="assets/logo.png" alt="logoImg">
            <figcaption>Vegan Honey</figcaption>
        </figure>

        <nav id="sideNav" class="sideNav">
            <span>
                <img class="navImg" src="assets/logo.png">
                <a href="#article">Our VHoney</a>
            </span>
            <span>
                <img class="navImg" src="assets/logo.png">
                <a href="#traceHoney">Trace Honey</a>
            </span>
            <span>
                <img class="navImg" src="assets/logo.png">
                <a href="#card">Shop</a>
            </span>
            <span>
                <img class="navImg" src="assets/logo.png">
                <a href="#">Facilities</a></span>
            <span>
                <img class="navImg" src="assets/logo.png">
                <a href="#">Contacts</a>
            </span>
        </nav>

    </div>

    <!-- sidebar con riepilogo ordine (work in progress) -->
    <div id="shoppingCart" class="side">
        <figure class="logo">
            <img src="assets/logo.png" alt="logoImg">
            <figcaption>Vegan Honey</figcaption>
        </figure>
        <div class="orderListContent">
            <h2>Your order recap:</h2>
            <ul id="orderList">
            </ul>
            <h3>Your total is: <span id="totalCost">0</span>‚Ç¨</h3>
            <button id="buy">BUY</button>
        </div>
    </div>

    <!-- overlay per le sidebar -->
    <div class="sfondo" id="sfondo">
    </div>

    <script>
        function showNavImg(e) {
            e.querySelector('img').style.display = "block";
        }
        function hideNavImg(e) {
            e.querySelector('img').style.display = "none";
        }

        // vale sia per sidebar che per riepilogo ordine
        function assegnaClasse(qualeSide) {
            console.log("start:" + qualeSide);
            let e = document.getElementById(qualeSide).classList;

            //assegno onclick all'overlay in base a quale sidebar lo attiva
            const overlay = document.getElementById('sfondo'); 
            overlay.setAttribute('onclick', 'assegnaClasse("' + qualeSide + '")');

            console.log(overlay.outerHTML); 

            if (e.contains("displaySee")) { //sidebar presente
                e.remove("displaySee"); //tolgo sidebar
                e.add("displayHide"); //smooth out
                document.getElementById("sfondo").style.display = "none"; //tolgo overlay
            }
            else { //sidebar da far uscire overlay da mettere
                e.remove("displayHide");
                e.add("displaySee");
                document.getElementById("sfondo").style.display = "flex";
            }
        }

        function addToCart() {


            let shoppingList = document.getElementById("orderList");
            console.log(shoppingList);
            const listItem = document.createElement('li');
            listItem.classList.add('orderItem');
            listItem.innerHTML = "VHoney, 1x, ‚Ç¨<span class='itemPrice'> 7</span>";
            console.log(listItem);
            shoppingList.appendChild(listItem);

            updateTotal();
        }

        function updateTotal() {
            console.log("updating total");
            let partial = 0;
            let itemPrices = document.querySelectorAll('.itemPrice');
            console.log("UL length: " + itemPrices.length);
            for (let i = 0; i < itemPrices.length; i++) {
                console.log(itemPrices[i].textContent);
                //parsefloat altrimenti prende textcontent come stringa
                partial += parseFloat(itemPrices[i].textContent);
            }
            console.log("new total: " + partial);
            document.getElementById("totalCost").textContent = partial;

        }

    </script>
</body>

</html>